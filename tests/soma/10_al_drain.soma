) ============================================================================
) AL Draining Tests
) Testing al.drain implementation
) ============================================================================

) TEST: Drain empty AL - returns persistent
) EXPECT_AL: [Nil]
Void Nil { !_.persistent !_.current _.persistent } >al.drain

) TEST: Drain AL with single item - action returns persistent unchanged
) EXPECT_AL: [Nil]
Void (a) Nil { !_.persistent !_.current _.current >print _.persistent } >al.drain

) TEST: Drain AL with multiple items - collect in persistent
) EXPECT_AL: [True, True, True]
Void (a) (b) (c) Nil { !_.persistent !_.current _.current _.persistent >list.cons } >al.drain
!my_list
my_list.value (c) >==
my_list.next.value (b) >==
my_list.next.next.value (a) >==

) TEST: Drain AL with counter - count items
) EXPECT_AL: [3]
Void (a) (b) (c) 0 { !_.persistent !_.current _.persistent >inc } >al.drain

) TEST: Drain with action that uses both persistent and current
) EXPECT_AL: [(PREFIX:)]
Void (x) (y) (z) (PREFIX:) { !_.persistent !_.current _.persistent >print _.current >print _.persistent } >al.drain
